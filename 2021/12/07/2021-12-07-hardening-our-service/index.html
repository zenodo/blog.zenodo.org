<!doctype html>
<html>
  <head>
<meta charset="utf-8">

<meta property="og:image" content="https://blog.zenodo.org/static/img/logos/zenodo-gradient-1000.png" />


<meta property="og:title" content="Hardening our service" />


<meta property="og:type" content="article" />



<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:site" content="@zenodo_org" />
<meta name="twitter:creator" content="@zenodo_org" />

<meta property="og:title" content="Hardening our service" />



<meta name="twitter:description" content="Zenodo is a free and open digital archive built by CERN and OpenAIRE, enabling researchers to share and preserve research output in any size, format and from all fields of research." />

<meta name="twitter:image" content="https://blog.zenodo.org/static/img/logos/zenodo-gradient-1000.png" />
<link rel="stylesheet" href="../../../../static/zenodo.css">
<link rel="stylesheet" href="../../../../static/style.css">
<link rel="stylesheet" href="../../../../static/font-awesome/css/font-awesome.min.css">
<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700,100,italic" rel="stylesheet">
<title>Hardening our service | Zenodo Blog  | Zenodo</title>
<script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
</head>
<body>
  <header>
    <nav class="navbar navbar-default navbar-static-top">
      <div class="container">
        <div class="navbar-header">
          <a href="https://zenodo.org"><img class="navbar-brand" src="/static/img/zenodo.svg" alt="Zenodo" /></a>
          <span class="logo-divider"></span>
          <span class="header-title" aria-label="header-title">Blog</span>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav navbar-right toplist">
            
              <li><a href="https://about.zenodo.org">About</a></li>
            
              <li><a href="https://blog.zenodo.org">Blog</a></li>
            
              <li><a href="https://help.zenodo.org">Help</a></li>
            
              <li><a href="https://about.zenodo.org/projects">Projects</a></li>
            
              <li><a href="https://developers.zenodo.org">Developers</a></li>
            
          </ul>
        </div>
      </div>
    </nav>
  </header>
  <div class="communities">
    
    
    <div class="container body-container">
      <div class="row">
        <div class="col-md-12">
          
  
    
<h1>Hardening our service</h1>

<p class="meta">
  by
  
    
    
    <img class="img-rounded" width=18 height=18 src="../../../../static/img/authors/aioannidis.jpg" />
    
    
    
    Alex Ioannidis,
  
  on December 7, 2021
</p>
<hr />
<div class="body"><p>Weâ€™ve <a href="https://blog.zenodo.org/2020/06/09/2020-06-09-slow-zenodo/">talked in the past</a> about the challenges of running a service at the scale of Zenodo in the inhospitable environment of the modern internet. Over the past couple of years, we have experienced an exponential increase in our users, content, and trafficâ€¦ and we couldnâ€™t be happier that Zenodo is proving useful in so many different ways! For Open Science to flourish,  researchers should feel empowered to share their data, software, and every part of their journey of publishing their work. We are proud to have done our part in lowering the barrier to share and preserve.</p>
<p>This year we crossed the threshold of <strong>2 million records</strong>, we are closing in on storing our <strong>first PetaByte of data</strong>, and weâ€™ve reached <strong>15 million annual visits</strong>. To keep up with these challenging requirements, our team put their heads together with our colleagues here at the CERN Data Center. Their long-running expertise in handling PBs of data generated from the CERN experiments is one of the reasons why we can offer a reliable service to the world in the first place. Over the past year, we have tweaked and optimized our infrastructure to help solve a variety of scaling and performance issues that weâ€™ve faced.</p>
<p><img src="/2021/12/07/2021-12-07-hardening-our-service/resumable-downloads.gif" align="right" style="width: 50%"></p>
<h3>Improved file serving</h3>
<p>One of the main culprits for our performance bottlenecks was the way we served files. Our web application was doing all the heavy-lifting, while the number of concurrent connections we needed to serve was increasing. The solution was simple: leave the heavy-lifting to the pros ðŸ’ª. With the help of our CERN storage team, we now have a dedicated setup for offloading file downloads directly to our <a href="https://eos-web.web.cern.ch/eos-web/">EOS storage cluster</a>.</p>
<p>This change also came with a bonus side-effect: Zenodo file downloads now support HTTP Range requests! This means resumable file downloads, as well as the unlocking the possibility for a wide range of applications which depend on accessing small parts of large files (e.g. <a href="https://www.cogeo.org/">Cloud Optimized GeoTIFF</a>, <a href="https://github.com/zarr-developers">Zarr</a>).</p>
<h3>Dedicated space for crawlers and bots</h3>
<p>Given our high content intake of almost 10k records on a weekly basis, it was natural that web crawlers and indexers had a tough time going through everything without stealing resources from normal users. There are conventions that instruct crawlers to slow down, but unfortunately, not all crawlers respect them. To minimize the impact crawlers have on the rest of the users, weâ€™ve put up a dedicated space that serves them in a machine-friendly fashion. That means that regular users get a performant and snappy experience while browsing our pages, while crawlers still get to index Zenodo at their own pace.</p>
<h3>Towards a stable future</h3>
<p>This is of course not the end of the story. We expect Zenodo to continue growing at the same rate and we have many plans to further stabilize and scale our infrastructure. We have closely monitored our database and search cluster performance, and identified points of improvement based on industry best practices. Weâ€™re also eager to explore ways to provide cached versions of our pages.</p>
<p>Last, but not least, our efforts in building and rebasing Zenodo on top of <a href="https://inveniosoftware.org/products/rdm/">InvenioRDM</a>, a turn-key solution for digital repositories, come in the form of a bottom-to-top revamp of our software stack, based on the same pillars that made Zenodo what it is today: a resilient,  top-of-the-class user experience, and scalable platform at the service of Open Science.</p>
</div>
  

        </div>
      </div>
    </div>
    
  </div>
  <footer class="footer">
    <div class="menu-wrapper">
      <div class="container">
        <div class="row footer-menu">
          <div class="col-xs-12 col-md-8">
            <div class="row">
              <div class="col-xs-2 col-md-2">
                <h5>About</h5>
                <ul class="list-unstyled">
                  <li><a href="http://about.zenodo.org">About</a></li>
                  <li><a href="http://about.zenodo.org/policies/">Policies</a></li>
                  <li><a href="http://about.zenodo.org/infrastructure/">Infrastructure</a></li>
                  <li><a href="http://about.zenodo.org/principles/">Principles</a></li>
                  <li><a href="http://about.zenodo.org/roadmap/">Roadmap</a></li>
                  <li><a href="http://about.zenodo.org/projects/">Projects</a></li>
                  <li><a href="http://about.zenodo.org/contact/">Contact</a></li>
                </ul>
              </div>
              <div class="col-xs-2 col-md-2">
                <h5>Blog</h5>
                <ul class="list-unstyled">
                  <li><a href="https://blog.zenodo.org">Blog</a></li>
                </ul>
              </div>
              <div class="col-xs-2 col-md-2">
                <h5>Help</h5>
                <ul class="list-unstyled">
                  <li><a href="https://help.zenodo.org">Overview</a></li>
                  <li><a href="https://help.zenodo.org/faq/">FAQ</a></li>
                  <li><a href="https://help.zenodo.org/guides/">Guides</a></li>
                  <li><a href="https://zenodo.org/support">Support</a></li>
                </ul>
              </div>
              <div class="col-xs-2 col-md-2">
                <h5>Developers</h5>
                <ul class="list-unstyled">
                <li><a href="https://developers.zenodo.org">REST API</a></li>
                <li><a href="https://developers.zenodo.org#oai-pmh">OAI-PMH</a></li>
                </ul>
              </div>
              <div class="col-xs-2 col-md-2">
                <h5>Contribute</h5>
                <ul class="list-unstyled">
                  <li><a href="https://github.com/zenodo/zenodo-rdm"><i class="fa fa-external-link"></i> GitHub</a></li>
                  <li><a href="https://zenodo.org/donate"><i class="fa fa-external-link"></i> Donate</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="col-xs-12 col-md-4">
            <div class="pull-right-md text-center-sm text-center-xs">
              <h5>Funded by</h5>
              <ul class="list-inline">
                <li><a href="https://home.cern"><img src="/static/img/cern.png" width="60" height="60" /></a></li>
                <li><a href="https://www.openaire.eu"><img src="/static/img/openaire.png" width="80"/></a></li>
                <li><a href="https://ec.europa.eu/programmes/horizon2020/"><img src="/static/img/eu.png" width="88" height="60" /></a></li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="container">
      <div class="row">
        <div class="col-xs-12 col-sm-6 col-sm-push-6">
          <div class="pull-right-sm text-center-xs">
            <ul class="list-inline">
              <li><a href="https://stats.uptimerobot.com/vlYOVuWgM">Status</a></li>
              <li><a href="https://about.zenodo.org/privacy-policy">Privacy policy</a></li>
              <li><a href="https://about.zenodo.org/cookie-policy">Cookie policy</a></li>
              <li><a href="https://about.zenodo.org/terms">Terms of Use</a></li>
              <li><a href="https://about.zenodo.org/contact">Support</a></li>
            </ul>
          </div>
        </div>
        <div class="col-xs-12 col-sm-6 col-sm-pull-6 text-center-xs">
          <p><a title="Except where otherwise noted, content on this site is licensed under a Creative Commons Attribution 4.0 International License." rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons Licence" height="20" src="https://i.creativecommons.org/l/by/4.0/88x31.png" /></a>&nbsp; Powered by <a href="https://home.cern/science/computing/data-centre">CERN Data Centre</a> &amp; <a href="http://inveniosoftware.org">Invenio</a>.</p>
        </div>
      </div>
    </div>
  </footer>
  
  
<div class="cookie-banner hidden">
    <i class="close icon"></i>
    <div>
        <p >This site uses cookies. Find out more on <a href="https://about.zenodo.org/cookie-policy">how we use cookies</a></p>
    </div>
    <div class="buttons">
        <button class="small primary" id="cookies-all">Accept all cookies</button>
        <button class="small" id="cookies-essential">Accept only essential cookies</button>
    </div>
</div>

<script>
var _paq = window._paq = window._paq || [];
_paq.push(['requireCookieConsent']);

(function() {
    var u="https://webanalytics.web.cern.ch/";
    _paq.push(['setTrackerUrl', u+'matomo.php']);
    _paq.push(['setSiteId', '362']);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
})();

var cookieConsent = document.cookie
    .split("; ")
    .find((row) => row.startsWith("cookie_consent="))
    ?.split("=")[1];

if (cookieConsent) {
    if (cookieConsent === "all") {
        matomo();
    }
} else {
    document.querySelector(".cookie-banner").classList.remove("hidden")
    _paq.push(['forgetConsentGiven']);
}

$('.cookie-banner .close')
    .on('click', function () {
    $(this)
        .closest('.cookie-banner')
        .fadeOut('fast');
    setCookie("cookie_consent","essential");
    });

$('#cookies-essential')
    .on('click', function () {
    $(this)
        .closest('.cookie-banner')
        .fadeOut('fast');
    setCookie("cookie_consent","essential");
    });

$('#cookies-all')
    .on('click', function () {
    $(this)
        .closest('.cookie-banner')
        .fadeOut('fast');
    setCookie("cookie_consent","all");
    _paq.push(['rememberCookieConsentGiven']);
    matomo();
    });

function matomo() {
    /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
    _paq.push(['trackPageView']);
    _paq.push(['enableLinkTracking']);
}

function setCookie(cname, cvalue) {
    var d = new Date();
    d.setTime(d.getTime() + (365 * 24 * 60 * 60 * 1000)); // one year
    var expires = "expires=" + d.toUTCString();
    var cookie = cname + "=" + cvalue + ";" + expires + ";"
    cookie += "path=.zenodo.org;SameSite=None; Secure"; // so that it works across subdomains
    document.cookie = cookie;
}
</script>



</body>
</html>
